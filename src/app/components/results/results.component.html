<div class="max-w-7xl mx-auto mt-8 p-6 text-gray-100">
  <div class="bg-slate-800 rounded-2xl p-8 shadow-2xl shadow-blue-900/40">
    <!-- Botón de regresar -->
    <div class="mb-8">
      <button
        (click)="goBack()"
        class="flex items-center text-blue-400 hover:text-blue-300 transition"
      >
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        Analizar otro video
      </button>
    </div>

    <!-- Resultados -->
    <div *ngIf="data" class="space-y-10">

      <!-- Transcripción -->
      <div class="bg-slate-700/60 p-6 rounded-xl border border-slate-600/40">
        <h3 class="text-xl font-semibold mb-4 text-sky-400">Transcripción</h3>
        <div class="transcript-box overflow-y-auto">
          <p class="text-gray-200 leading-relaxed whitespace-pre-line">
            {{ data.transcript }}
          </p>
        </div>
      </div>

      <!-- Resumen -->
      <div class="bg-slate-700/60 p-6 rounded-xl border border-slate-600/40">
        <h3 class="text-xl font-semibold mb-4 text-sky-400">Resumen</h3>
        <p class="text-gray-200 leading-relaxed">{{ data.resumen }}</p>
      </div>

      <!-- Gráficas en la misma fila -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Palabras clave -->
        <div class="bg-slate-700/60 p-6 rounded-xl border border-slate-600/40">
          <h3 class="text-lg font-semibold text-sky-400 mb-4">Palabras Clave</h3>
          <div style="height: 320px;">
            <canvas baseChart [type]="'bar'" [data]="barChartData" [options]="barChartOptions"></canvas>
          </div>
        </div>

        <!-- Sentimiento general -->
        <div class="bg-slate-700/60 p-6 rounded-xl border border-slate-600/40">
          <h3 class="text-lg font-semibold text-sky-400 mb-4">Sentimiento General</h3>
          <div class="flex justify-center items-center" style="height: 320px;">
            <canvas baseChart [type]="'pie'" [data]="pieChartData" [options]="pieChartOptions"></canvas>
          </div>
        </div>
      </div>

      <!-- Evolución del Sentimiento (FULL WIDTH, altura reducida) -->
      <div class="relative -mx-8 bg-slate-700/70 px-8 py-8 rounded-xl border border-slate-600/40">
        <h3 class="text-lg font-semibold text-sky-400 mb-4">Evolución del Sentimiento</h3>
        <div class="w-full" style="height: 225px;">
          <canvas
            baseChart
            [type]="'line'"
            [data]="lineChartData"
            [options]="{
              responsive: true,
              maintainAspectRatio: false,
              scales: {
                x: { ticks: { color: '#9CA3AF' }, grid: { color: '#374151' } },
                y: { ticks: { color: '#9CA3AF' }, grid: { color: '#374151' } }
              },
              plugins: {
                legend: { labels: { color: '#E5E7EB' } }
              }
            }">
          </canvas>
        </div>
      </div>

      <!-- Temas -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div class="bg-slate-700/60 p-6 rounded-xl border border-slate-600/40">
          <h4 class="font-medium mb-3 text-sky-300">Tema Principal</h4>
          <p class="text-gray-100 font-semibold text-lg">{{ data.tema }}</p>
        </div>
        <div class="bg-slate-700/60 p-6 rounded-xl border border-slate-600/40">
          <h4 class="font-medium mb-3 text-sky-300">Temas Relacionados</h4>
          <div class="flex flex-wrap gap-2">
            <span *ngFor="let tema of data.temas_top3" class="px-3 py-1 bg-indigo-900/70 text-indigo-200 rounded-full text-sm">
              {{ tema }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
